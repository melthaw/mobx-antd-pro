# Ant Design Pro With Mobx

This project is initialized with [Ant Design Pro](https://pro.ant.design). 

And we made some changes to replace dva with mobx.

## What are changed - Configuration

Default plugins in package.json generated by `npm run umi`

```json
{
    ...
    "devDependencies": {
        ...
        "@umijs/plugin-blocks": "^2.0.5",
        "@umijs/preset-ant-design-pro": "^1.2.0",
        "@umijs/preset-react": "^1.4.8",
        "@umijs/preset-ui": "^2.0.9",
        ...
    },
    ...
}
```

And the following plugins are introduced by @umijs/preset-react automatically:

* @umijs/plugin-access
* @umijs/plugin-analytics
* @umijs/plugin-antd
* @umijs/plugin-crossorigin
* @umijs/plugin-dva
* @umijs/plugin-helmet
* @umijs/plugin-initial-state
* @umijs/plugin-layout
* @umijs/plugin-locale
* @umijs/plugin-model
* @umijs/plugin-request
* @umijs/plugin-test

What we wanted is to remove `@umijs/plugin-dva` and introduce [umi-plugin-mobx-store](https://github.com/melthaw/umi-plugin-mobx-store) to take its place.

So the package.json goes to 

```json
{
    ...
    "devDependencies": {
        ...
        "@umijs/fabric": "^2.2.0",
        "@umijs/plugin-blocks": "^2.0.5",
        "@umijs/preset-ant-design-pro": "^1.2.0",
        "@umijs/preset-ui": "^2.0.9",
        "@umijs/plugin-access": "2.3.1",
        "@umijs/plugin-analytics": "0.2.2",
        "@umijs/plugin-antd": "0.8.0",
        "@umijs/plugin-crossorigin": "1.1.1",
        "@umijs/plugin-helmet": "1.1.1",
        "@umijs/plugin-initial-state": "2.2.1",
        "@umijs/plugin-layout": "0.12.1",
        "@umijs/plugin-locale": "0.10.1",
        "@umijs/plugin-model": "2.5.3",
        "@umijs/plugin-request": "2.5.0",
        "@umijs/plugin-test": "1.0.0",
        "@umijs/yorkie": "^2.0.3",
        "umi-plugin-mobx-store": "0.9.3",    
        ...
    },
    ...
}
```

## What are changed - Programming

> Put your models under src/**/models path.
> All of them will be scanned by [umi-plugin-mobx-store](https://github.com/melthaw/umi-plugin-mobx-store)

for example:

```javascript
import {queryCurrent, query as queryUsers} from '@/services/user';
import {observable, action} from "mobx";


export class UserModel {

  rootStore = null

  @observable users = []
  @observable currentUser = {}

  constructor(rootStore) {
    this.rootStore = rootStore
  }

  @action
  fetch() {
    queryUsers().then(response => {
      this.users = response
    })
  }

  @action
  fetchCurrent() {
    queryCurrent().then(response => {
      this.currentUser = response
    })
  }

}

```


-----

Follow is the quick guide for how to use.


## Environment Prepare

Install `node_modules`:

```bash
npm install
```

or

```bash
yarn
```

## Provided Scripts

Ant Design Pro provides some useful script to help you quick start and build with web project, code style check and test.

Scripts provided in `package.json`. It's safe to modify or add additional script:

### Start project

```bash
npm start
```

### Build project

```bash
npm run build
```

### Check code style

```bash
npm run lint
```

You can also use script to auto fix some lint error:

```bash
npm run lint:fix
```

### Test code

```bash
npm test
```

# Appendix 

## Refz

* [Best Practices for building large scale maintainable projects](https://mobx.js.org/best/store.html)
